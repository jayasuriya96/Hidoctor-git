@{
    ViewBag.Title = "Employee";
    Layout = null;
}
<link href="../../Areas/HiDoctor_Master/Content/HD_Master.css" rel="stylesheet" />
<link href="~/Content/Bootstrap/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/Bootstrap/bootstrap.js"></script>
<link type="text/css" href="../../Areas/HiDoctor_Master/Content/UsercreationWizard.css" rel="stylesheet" />

<style>
    .e-headercelldiv {
        font-size: 14px !important;
        color: black !important;
        margin-top: 3px !important;
    }

    .e-grid .e-groupdroparea {
        background-color: #0072c6 !important;
        color: white !important;
        margin-top: 15px !important;
        font-weight: bold !important;
    }

    .dvHeader {
        width: 100%;
        height: 30px;
        background-color: #0072c6;
        color: white;
        font-weight: bold;
        font-size: 13px;
        padding-left: 5px;
        padding-top: 4px;
    }

    .dvSubHeader {
        width: 98%;
        border-bottom: 1px solid #DDD;
        color: #A4A4A4;
        font-size: 15px;
        padding: 5px;
    }

    .dvSubDetails {
        padding: 5px;
        width: 98%;
    }

    .Mandatory {
        color: red;
    }

    .tdleftWidth {
        width: 20%;
    }

    #dvMainEmployee table {
        width: 100%;
    }

        #dvMainEmployee table input[type=text] {
            width: 30%;
        }

        #dvMainEmployee table textarea {
            width: 30%;
        }

    .tooltip {
        background-color: #000;
        border: 1px solid #fff;
        padding: 10px 15px;
        width: 200px;
        display: none;
        color: #fff;
        text-align: left;
        font-size: 12px;
        -moz-box-shadow: 0 0 10px #000;
        -webkit-box-shadow: 0 0 10px #000;
        z-index: 999999;
    }

    #dvEmpDetails {
        /*height: 450px;*/
        /*overflow: scroll;*/
    }

        #dvEmpDetails a {
            color: blue;
            text-decoration: underline;
            cursor: pointer;
        }

    #dvInactiveEmpDetails {
        /* height: 450px;*/
        /* overflow: scroll;*/
    }

        #dvInactiveEmpDetails a {
            color: blue;
            text-decoration: underline;
            cursor: pointer;
        }


    table:nth-child(odd) {
        text-align: center;
    }
</style>
<style id="customSyncStyle" type="text/css">
    #dvEmpDetails .e-frozenheader > .e-table, #dvEmpDetails .e-frozencontent > .e-table {
        border-right: none;
    }
</style>
<style id="customSyncStyleInactive" type="text/css">
    #dvInactiveEmpDetails .e-frozenheader > .e-table, #dvInactiveEmpDetails .e-frozencontent > .e-table {
        border-right: none;
    }
</style>


<script src="../../Scripts/Bootstrap/bootstrap.js"></script>
<script src="~/Scripts/ej2/ej2.min.js" type="text/javascript"></script>
<link href="~/Content/ej2/material.css" rel="stylesheet" />

<div id="dvTab" class="form-group" style="margin-top: 10px;">
    <ul class="nav nav-pills">
        <li><a href="#dvMainEmployee">New Employee</a></li>
        <li><a href="#dvEditEmp" id="aEditEmp">Edit Employee</a></li>
        <li><a href="#dvInactiveEmp" id="aInactiveEmp">Inactive Employee</a></li>
    </ul>
    <div id="dvMainEmployee" class="col-lg-12 form-group" style="overflow: auto;">
        <div class="dvSubHeader">
            Basic information
        </div>
        <div class="dvSubDetails">

            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Employee Name <span class="Mandatory">*</span>
                    </td>
                    <td style="text-align:left;">
                        <input type="text" id="txtEmployeeName" maxlength="50" onblur="fnValidateEmpName();" />
                        <input type="hidden" id="hdnEmployeeCode" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Gender <span class="Mandatory">*</span>
                    </td>
                    <td id="gender" style="text-align:left">
                        <input type="radio" name="rdGender" value="M" checked="checked" />
                        Male
                        <input type="radio" name="rdGender" value="F" />
                        Female
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Date of Birth
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtDOB" class="DOBdatepicker" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Blood Group
                    </td>
                    <td style="text-align:left">
                        <div class="col-sm-3" id="dvbldgroup">
                            <input id="blooddgrp" style="width:30%;" placeholder="Choose a Blood Group" autocomplete="off" />

                        </div>

                        <br />
                        <br />
                    </td>
                </tr>


                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Employee Photo
                    </td>
                    <td style="text-align:left">
                        <div class="col-lg-3 form-group">
                            <input type="file" style="width:30%;" name="fileupload" id="fileupload" class="form-control" />
                            <span id="fileUrl"></span>
                        </div>
                        <div>
                        </div>
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </div>
        <div class="dvSubHeader">
            Employee information
        </div>
        <div class="dvSubDetails">
            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Employee Number <span class="Mandatory">*</span>
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtEmployeeNumber" maxlength="30" onblur="fntxtEmployeeNumber();" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Department
                    </td>
                    <td style="text-align:left;">
                        <div class="dropdown">
                            @*style="margin-left: 10%;width: 100%;"*@
                            <select id="txtDept" style="width:30%;text-align:left">
                                <option maxlength="25" style="text-align:left;">Please Select Department</option>
                                <option maxlength="25" value="Dept1" style="text-align:left;">Dept1</option>
                            </select>
                            <input type="text" name="displayValue" id="txtAdddept" style="width:15%;" placeholder="Add Your Department" />
                            <input type="button" value="Add" onclick="fnInputDeptDetails();" />
                        </div>
                    </td>
                </tr>
                @*These colums removed from front end*@

                @*<tr>
                        <td class="tdleftWidth" style="text-align:left;">
                            Resume Given
                        </td>
                        <td style="text-align:left">
                            <input type="radio" name="rdResumeGiven" value="1" checked="checked" />
                            Yes
                            <input type="radio" name="rdResumeGiven" value="0" />
                            No
                        </td>
                    </tr>*@
                @*<tr>
                        <td class="tdleftWidth" style="text-align:left;">
                            EDN Proof
                        </td>
                        <td style="text-align:left">
                            <input type="radio" name="rdEDN" value="1" checked="checked" />
                            Yes
                            <input type="radio" name="rdEDN" value="0" />
                            No
                        </td>
                    </tr>*@
                @*<tr>
                        <td class="tdleftWidth" style="text-align:left;">
                            Salary Proof
                        </td>
                        <td style="text-align:left">
                            <input type="radio" name="rdSalary" value="1" checked="checked" />
                            Yes
                            <input type="radio" name="rdSalary" value="0" />
                            No
                        </td>
                    </tr>*@

                @*<tr>
                        <td class="tdleftWidth" style="text-align:left;">
                            Appointed
                        </td>
                        <td style="text-align:left">
                            <input type="radio" name="rdAppointed" value="1" checked="checked" />
                            Yes
                            <input type="radio" name="rdAppointed" value="0" />
                            No
                        </td>
                    </tr>*@
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Date of Joining <span class="Mandatory">*</span>
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtDOJ" class="DOBdatepicker" onchange="fnChangeDOC(this)" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Proposed Date of Confirmation
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtPDOC" class="DOCdatepicker" disabled />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Date of Confirmation
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtDOC" class="DOCdatepicker" />
                    </td>
                </tr>
                @*<tr>
                        <td class="tdleftWidth" style="text-align:left;">
                            Resignation Submitted
                        </td>
                        <td style="text-align:left">
                            <input type="radio" name="rdResignationSubmitted" value="1" checked="checked" />
                            Yes
                            <input type="radio" name="rdResignationSubmitted" value="0" />
                            No
                        </td>
                    </tr>*@

            </table>
        </div>

        <div class="dvSubHeader">
            Statutory Information
        </div>
        <div class="dvSubDetails">
            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        PF Number
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtPFNumber" maxlength="50" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        PAN Number
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtPANNumber" maxlength="10" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        AADHAAR Number
                    </td>
                    <td style="text-align:left">
                        <input type="number" class="aadhar" id="txtAADHAARnumberbox_1" min="1" max="9999" onkeypress="return fntxtAadharNumber(this,event)" ; />
                        <input type="number" class="aadhar" id="txtAADHAARnumberbox_2" min="1" max="9999" onkeypress="return fntxtAadharNumber(this,event)" ; />
                        <input type="number" class="aadhar" id="txtAADHAARnumberbox_3" min="1" max="9999" onkeypress="return fntxtAadharNumber(this,event)" ; />
                    </td>
                </tr>

            </table>
        </div>

        <div class="dvSubHeader">
            Bank Details
        </div>
        <div class="dvSubDetails">
            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Bank Account1
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtAcc1" maxlength="20" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Bank Account2
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtAcc2" maxlength="20" />
                    </td>
                </tr>

            </table>
        </div>

        <div class="dvSubHeader">
            Communication Details
        </div>
        <div class="dvSubDetails">
            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Address Line1
                    </td>
                    <td style="text-align:left">
                        <textarea id="txtAddress" maxlength="300" style="border:1px solid #CCC"></textarea>
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Address Line2
                    </td>
                    <td style="text-align:left">
                        <textarea id="txtAddress2" maxlength="300" style="border:1px solid #CCC"></textarea>
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Address Line3
                    </td>
                    <td style="text-align:left">
                        <textarea id="txtAddress3" maxlength="300" style="border:1px solid #CCC"></textarea>
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        State
                    </td>
                    <td style="text-align:left">
                        <div class="dropdown">
                            @*style="margin-left: 10%;width: 100%;">*@
                            <select id="txtState" style="width:30%;" onchange="fnGetCitiesDetails(this.value)">
                                <option maxlength="25" style="text-align:left;" value="0">Please Select State</option>
                            </select>
                            <input type="text" name="displayValue" id="txtAddState" style="width:15%;" placeholder="Add Your State" />
                            <input type="button" value="Add" onclick="fnInputStateName();" />
                        </div>
                    </td>

                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        City
                    </td>
                    <td style="text-align:left">
                        <div class="dropdown">
                            @*style="margin-left: 10%;width: 100%;">*@
                            <select id="txtCity" style="width:30%;" onchange="fnGetPincodesDetails(this.value);">
                                <option maxlength="25" style="text-align:left;" value="0">Please Select City</option>
                            </select>
                            <input type="text" name="displayValue" id="txtAddCity" style="width:15%;" placeholder="Add Your City" />
                            <input type="button" value="Add" onclick="fnInputCityName();" />
                        </div>
                    </td>
                </tr>

                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Pincode
                    </td>
                    <td style="text-align:left">
                        <div class="dropdown">
                            @*style="margin-left: 10%;width: 100%;">*@
                            <select id="txtPincode" style="width:30%;">
                                <option maxlength="25" style="text-align:left;" value="0">Please Select Pincode</option>
                            </select>
                            <input type="text" maxlength="6" name="displayValue" id="txtAddPincode" style="width:15%;" placeholder="Add Your PinCode" />
                            <input type="button" value="Add" onclick="fnInputPincode();" />
                        </div>
                    </td>
                </tr>

                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Mobile<span class="Mandatory">*</span>
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtMobile" maxlength="10" />

                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Phone
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtPhone" maxlength="11" />
                        NOTE : Please enter number along with pincode when entering landline number
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Email<span class="Mandatory">*</span>
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtEmail" maxlength="50" />
                    </td>
                </tr>

            </table>


        </div>
        @*<div class="col-sm-12 clearfix">
                <div class="col-sm-3">
                    <label>BLood Group</label>

                </div>

                <div class="col-sm-3" id="dvbldgroup">
                    <input id="blooddgrp" style="" placeholder="Choose a Blood Group" autocomplete="off" />

                </div>

            </div>

            <div class="col-sm-12 clearfix">
                <div class="col-sm-3">
                    Employee Photo
                </div>

                    <div class="col-lg-3 form-group">
                        <input type="file" name="fileupload" id="fileupload" class="form-control" />
                        <span id="fileUrl"></span>
                    </div>

                    </div>*@



        <div class="dvSubHeader" style="display:none">
            Employee Type
        </div>
        <div class="dvSubDetails" style="display:none">

            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Employee Entity Type
                    </td>
                    <td style="text-align:left">
                        <input type="radio" name="rdEntity" value="CORPORATE" checked="checked" />
                        Corporate
                        <input type="radio" name="rdEntity" value="DISTRIBUTOR" />
                        Distributor
                    </td>
                </tr>
            </table>
        </div>
        <div class="dvSubHeader">
            Other Details
        </div>
        <div class="dvSubDetails">
            <table>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Reference Key1
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtRefKey1" maxlength="50" />
                    </td>
                </tr>
                <tr>
                    <td class="tdleftWidth" style="text-align:left;">
                        Reference Key2
                    </td>
                    <td style="text-align:left">
                        <input type="text" id="txtRefKey2" maxlength="50" />
                    </td>

                </tr>

            </table>
        </div>
        <div style="width: 100%;">
            <div style="width: 100%; float: left;"><span class="Mandatory">* Mandatory Fields</span></div>
            <div style="width: 100%; float: left;">
                <input type="button" class="btn small primary" value="Submit" onclick="fnEmployeeSubmit();" />
                <input type="button" id="btnReset" class="btn small primary" value="Reset" onclick="fnEmpClearAll();" />
                <input type="button" id="btnClose" class="btn small primary" value="Close" onclick="fnCloseEmpPop();" />
                <input type="hidden" id="hdnMode" value="INSERT" />
            </div>
            <div style="clear: both;"></div>
        </div>
    </div>

    <div id="dvEditEmp">
        @*<div class="col-lg-4" style="float: right;">
                <div class="col-lg-12">
                    <div style="width: 13%; float: left;">
                        Search
                    </div>
                    <div style="width: 70%; float: left;">
                        <input type="text" id="txtEmpSearch" placeholder="Type Employee Name" class="form-control" />
                    </div>
                    <div style="width: 10%; float: left; padding-left: 2%;">
                        <input type="button" value="Go" onclick="fnGetSearchResult();" class="btn btn-primary" />
                    </div>
                    <div id="dvExcelExport" style="float: right; padding-right: 3%;">
                    </div>
                </div>
            </div>*@
        <div id="dvEmpDetails" class="table-responsive form-group" style="clear: both; padding-top: 1%;"></div>
        <div id="dvEmpDetailshidden" class="table-responsive form-group" style="clear: both; padding-top: 1%;display:none;"></div>
    </div>
    <div id="dvInactiveEmp">
        @*<div class="col-lg-4" style="float: right;">
                <div class="col-lg-12">
                    <div style="width: 13%; float: left;">
                        Search
                    </div>
                    <div style="width: 70%; float: left;">
                        <input type="text" id="txtInactiveEmpSearch" placeholder="Type Employee Name" class="form-control" />
                    </div>
                    <div style="width: 10%; float: left; padding-left: 2%;">
                        <input type="button" value="Go" onclick="fnGetInactiveSearchResult();" class="btn btn-primary" />
                    </div>
                    <div id="dvInactiveExcelExport" style="float: right; padding-right: 3%;">
                    </div>
                </div>
            </div>*@
        <div id="dvInactiveEmpDetails" class="table-responsive form-group" style="clear: both; padding-top: 1%;"></div>
        <div id="dvInactiveEmpDetailshidden" class="table-responsive form-group" style="clear: both; padding-top: 1%;display:none;"></div>
    </div>
    <div class="modal" id="EmpRemarks">
        <div class="modal-dialog" style="-webkit-box-shadow:none;background:none;border:0px;">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Employee Status</h4>

                </div>

                <!-- Modal body -->
                <div class="modal-body clearfix">
                    <div class="col-md-12 clearfix">
                        <div class="col-md-2">
                            <label>Remarks:</label>
                        </div>
                        <textarea rows="5" cols="35" id="remarks"></textarea>
                    </div>
                    <div style="float:right" class="col-md-12 clearfix">
                        <button type="button" id="SaveRemark" class="btn btn-primary buttonSave" onclick="fnStatusSave();">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="simple_overlay" id="dvDisableUser" style="min-height: 300px !important;">
    <div id="dvBulkDisUsers">
    </div>
</div>
<div id="dvDisUserCount" title="Disable User alert!!">
    <div id="dvUserContent"></div>
</div>



<input type="hidden" id="hdnSelectedRow" />
<script src="../../Areas/HiDoctor_Master/Scripts/HD_Master/Employee.js?v=@HiDoctor.BuildNumber.BuildNo" type="text/javascript"></script>
<script src="../../Scripts/HD/KangleIntegration.js?v=@HiDoctor.BuildNumber.BuildNo"></script>
<script src="~/Scripts/jquery.mtz.monthpicker.js?v=@HiDoctor.BuildNumber.BuildNo" type="text/javascript"></script>
<link href="~/Content/Bootstrap/awesome-bootstrap-checkbox.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
<link href="~/Content/Bootstrap/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/Bootstrap/bootstrap.js"></script>
<script src="~/Scripts/jquery.mtz.monthpicker.js"></script>
<script src="~/Scripts/HD/common12.7.0.js"></script>
<script lang="ja">
    var allEmployeeJson_g = "";
    var EmployeeJson_g= "";
    var empUserCode_g="";
    var empUserName_g="";
    var aadhaar_No="";
    var Eaadhaar="";
    var Entitytype="CORPORATE";
    var EditEmp="";
    var Company_Code = "";
    var Logged_User_Code = "";
    $(document).ready(function () {
        AjaxGlobalHandler.Initiate();
        $(document).ajaxStop($.unblockUI);
        $("#dvTab").tabs();
        //FromUserMaster
        fnGetDepartmentDetails();
        fnGetStateDetails();
        fnEmpClearAll();
        fnGetAllEmployees();
        fnGetEmpDetails(1);
        fnGetEmpInactiveDetails(1);
        fngetABloodgroupnames();
        $("#txtEmployeeName").focus();
        var year=new Date(curdate.split('.')[2]+'-'+curdate.split('.')[1]+'-'+curdate.split('.')[0]).getFullYear();
        $(".DOBdatepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd/mm/yy',
            yearRange: (year - 150) + ':' + (year + 0)
        });
        $(".DOCdatepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd/mm/yy',
            yearRange: (year - 50) + ':' + (year + 1)
        });
        var screenMode = @Html.Raw(Json.Encode(ViewBag.FromUserMaster));
        Company_Code = @Html.Raw(Json.Encode(ViewBag.Company_Code));
        Logged_User_Code = @Html.Raw(Json.Encode(ViewBag.Logged_User_Code));
        if(screenMode!=null){
            $("#aEditEmp").hide();
            $('#dvEditEmp').hide();
        }
        else{
            // $("#aEditEmp").html('Edit Employee');
            $("#aEditEmp").show();
            $('#dvEditEmp').show();
            $("#btnClose").hide();
        }
        $(".datepicker").datepicker({ "dateFormat": "dd/mm/yy", "changeMonth": true, "changeYear": true })
        $("#dvMainEmployee input[type=text]").blur(function(){ fnRemoverErrorIndicator(this); });
        $("#dvMainEmployee input[type=password]").blur(function(){ fnRemoverErrorIndicator(this); });
        $("#dvDisableUser").overlay({
            onBeforeLoad: function () {
                //  $("#dvBulkDisUsers").load('../HiDoctor_Master/User/DisableUser/?id=BULK_USER|');
                fnOpenDisableUser();
            },
            onLoad: function () {
                $("#dvAjaxLoad").show();
            }
        });
        $("#txtdept").bind("paste", function(){ return false; });
        $("#txtCity").bind("paste", function(){ return false; });
        $("#txtState").bind("paste", function(){ return false; });
        $("#txtPincode").bind("paste", function(){ return false; });
        $("#txtDOB").bind("paste", function(){ return false; } );
        $("#txtDOJ").bind("paste", function(){ return false; } );
        $("#txtDOC").bind("paste", function(){ return false; } );
        $('#txtAddress').keypress(function(){ if(event.keyCode == 13) return false});
        $('#txtAddress2').keypress(function(){ if(event.keyCode == 13) return false});
        $('#txtAddress3').keypress(function(){ if(event.keyCode == 13) return false});
        $("#dvAjaxLoad").hide();
    });

    //function fnGoToPrevPage() {
    //    var pno = parseInt($('#pageno').html()) - 1;
    //    fnGetSFCRegions(pno);
    //}
    //function fnGoToNextPage() {
    //    var pno = parseInt($('#pageno').html()) + 1;
    //    fnGetSFCRegions(pno);
    //}
    //function fnGoToPage() {
    //    var pno = $('#drpPaging :selected').val();
    //    fnGetSFCRegions(pno);
    //}

</script>
