(function (e) { function a(e) { return e < 10 ? "0" + e : e } function f(e, t) { var n = typeof e; if (n == "number") { return e } var r = parseInt(e, 10); if (r != NaN) { return r } return t } function l(e, t) { var n = typeof e; if (n == "boolean") { return e } if (n == "string") { return e.toLowerCase() == "true" } return t } function c(e) { if (typeof e != "string" || e.length != 5) { return e } var t = e.split(":"); var n = parseInt(t[0], 10); return (n > 12 ? a(n - 12) : t[0]) + ":" + t[1] + " " + (n > 11 ? "PM" : "AM") } function h(e) { e = e.replace(" ", ""); var t = e.substr(5, 2).toLowerCase() == "pm"; var n = parseInt(e.substr(0, 2), 10); if (n == NaN) { return null } return a(t && n != 12 ? n + 12 : n) + e.substr(2, 3) } function p(e) { var t = Math.floor(e / 60); var n = e % 60; return a(t) + ":" + a(n) } function d(e, t) { return t ? e : c(e) } function v(e) { var t = e || o; t.interval = f(t.interval || o.interval, o.interval); t.interval = t.interval < 1 || t.interval > r ? o.interval : t.interval; t.nativeMenu = l(t.nativeMenu || o.nativeMenu, o.nativeMenu); t.display24Hour = l(t.display24Hour || o.display24Hour, o.display24Hour); t.value24Hour = l(t.value24Hour || o.value24Hour, o.value24Hour); return t } function m(e) { if (!e) { return null } if (e.length == 1) { e = "0" + e + ":00" } if (e.length == 2) { e += ":00" } if (e.length == 7 || e.length == 8) { e = h(e) } var t = parseInt(e.substr(0, 2), 10); if (t == NaN) { return null } if (t > 23) { return null } var n = e.substr(2, 1); if (n != ":") { return null } var r = parseInt(e.substr(3, 2), 10); if (r == NaN) { return null } if (r > 59) { return null } return new Date(1959, 2, 3, t, r, 0, 0) } function g(e, t) { return t * Math.floor(e / t) + parseInt(e % t < t / 2 ? 0 : t) } function y(e, t) { var r = e.getHours() * 60 + e.getMinutes(); var r = g(r, t); while (r > n) { r = (r / t - 1) * t } return p(r) } function b(e, t, r, i, s) { var o = ""; var u; o += '<select id="' + e + '" class="timepicker" data-native-menu="' + i.toString() + '">'; o += '<option value="0">-Select Time-</option>'; for (var a = 0; a <= n; a += r) { u = p(a); o += '<option value="' + d(u, s) + '"'; o += ">" + d(u, s) + "</option>" } o += "</select>"; return o } function w(t, n) { var r = i + t.id; var s = m(n); if (s) { var o = y(s, t.interval); e("#" + r).val(o).selectmenu("refresh"); t.value = d(o, t.value24Hour) } } function E(t) { var n = t.id.substr(i.length); var r = e("#" + n).get(0).value24Hour; var s = d(e(t).val(), r); e("#" + n).get(0).value = s } var t = (new Date).getTime(); var n = 1439; var r = 1440; var i = "picker_"; var s = "easytimepicker-haspicker"; var o = { interval: 5, display24Hour: false, value24Hour: true, nativeMenu: true }; var u = e.fn.val; e.fn.val = function (e) { if (typeof e != "undefined") { var t = this.get(0); if (t && t.className.indexOf(s) != -1) { w(t, e); return this } else { return u.call(this, e) } } return u.call(this) }; e.fn.easytimepicker = function (n) { var r = v(n); this.each(function () { this.id = this.id || ++t; this.value24Hour = r.value24Hour; this.interval = r.interval; var n = e(this); var o = this.id; var u = i + o; var a = y(m(n.val()) || new Date, r.interval); n.attr("style", "display:none").after(b(u, a, r.interval, r.nativeMenu, r.display24Hour)); e("label[for=" + o + "]").attr("for", u); n.addClass(s); this.value = d(a, this.value24Hour) }); e("select.timepicker").change(function () { E(this) }); return this } })(jQuery)