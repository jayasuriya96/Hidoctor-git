Type.registerNamespace("Sys.Mvc"); Sys.Mvc.$create_Validation = function () { return {} }; Sys.Mvc.$create_JsonValidationField = function () { return {} }; Sys.Mvc.$create_JsonValidationOptions = function () { return {} }; Sys.Mvc.$create_JsonValidationRule = function () { return {} }; Sys.Mvc.$create_ValidationContext = function () { return {} }; Sys.Mvc.NumberValidator = function () { }; Sys.Mvc.NumberValidator.create = function (e) { return Function.createDelegate(new Sys.Mvc.NumberValidator, (new Sys.Mvc.NumberValidator).validate) }; Sys.Mvc.NumberValidator.prototype = { validate: function (e, t) { if (Sys.Mvc._ValidationUtil.$1(e)) { return true } var n = Number.parseLocale(e); return !isNaN(n) } }; Sys.Mvc.FormContext = function (e, t) { this.$5 = []; this.fields = new Array(0); this.$9 = e; this.$7 = t; e["__MVC_FormValidation"] = this; if (t) { var n = t.getElementsByTagName("ul"); if (n.length > 0) { this.$8 = n[0] } } this.$3 = Function.createDelegate(this, this.$D); this.$4 = Function.createDelegate(this, this.$E) }; Sys.Mvc.FormContext._Application_Load = function () { var e = window.mvcClientValidationMetadata; if (e) { while (e.length > 0) { var t = e.pop(); Sys.Mvc.FormContext.$12(t) } } }; Sys.Mvc.FormContext.$F = function (e, t) { var n = []; var r = document.getElementsByName(t); for (var i = 0; i < r.length; i++) { var s = r[i]; if (Sys.Mvc.FormContext.$10(e, s)) { Array.add(n, s) } } return n }; Sys.Mvc.FormContext.getValidationForForm = function (e) { return e["__MVC_FormValidation"] }; Sys.Mvc.FormContext.$10 = function (e, t) { while (t) { if (e === t) { return true } t = t.parentNode } return false }; Sys.Mvc.FormContext.$12 = function (e) { var t = $get(e.FormId); var n = !Sys.Mvc._ValidationUtil.$1(e.ValidationSummaryId) ? $get(e.ValidationSummaryId) : null; var r = new Sys.Mvc.FormContext(t, n); r.enableDynamicValidation(); r.replaceValidationSummary = e.ReplaceValidationSummary; for (var i = 0; i < e.Fields.length; i++) { var s = e.Fields[i]; var o = Sys.Mvc.FormContext.$F(t, s.FieldName); var u = !Sys.Mvc._ValidationUtil.$1(s.ValidationMessageId) ? $get(s.ValidationMessageId) : null; var a = new Sys.Mvc.FieldContext(r); Array.addRange(a.elements, o); a.validationMessageElement = u; a.replaceValidationMessageContents = s.ReplaceValidationMessageContents; for (var f = 0; f < s.ValidationRules.length; f++) { var l = s.ValidationRules[f]; var c = Sys.Mvc.ValidatorRegistry.getValidator(l); if (c) { var h = Sys.Mvc.$create_Validation(); h.fieldErrorMessage = l.ErrorMessage; h.validator = c; Array.add(a.validations, h) } } a.enableDynamicValidation(); Array.add(r.fields, a) } var p = t.validationCallbacks; if (!p) { p = []; t.validationCallbacks = p } p.push(Function.createDelegate(null, function () { return Sys.Mvc._ValidationUtil.$0(r.validate("submit")) })); return r }; Sys.Mvc.FormContext.prototype = { $3: null, $4: null, $6: null, $7: null, $8: null, $9: null, replaceValidationSummary: false, addError: function (e) { this.addErrors([e]) }, addErrors: function (e) { if (!Sys.Mvc._ValidationUtil.$0(e)) { Array.addRange(this.$5, e); this.$11() } }, clearErrors: function () { Array.clear(this.$5); this.$11() }, $A: function () { if (this.$7) { if (this.$8) { Sys.Mvc._ValidationUtil.$3(this.$8); for (var e = 0; e < this.$5.length; e++) { var t = document.createElement("li"); Sys.Mvc._ValidationUtil.$4(t, this.$5[e]); this.$8.appendChild(t) } } Sys.UI.DomElement.removeCssClass(this.$7, "validation-summary-valid"); Sys.UI.DomElement.addCssClass(this.$7, "validation-summary-errors") } }, $B: function () { var e = this.$7; if (e) { var t = this.$8; if (t) { t.innerHTML = "" } Sys.UI.DomElement.removeCssClass(e, "validation-summary-errors"); Sys.UI.DomElement.addCssClass(e, "validation-summary-valid") } }, enableDynamicValidation: function () { Sys.UI.DomEvent.addHandler(this.$9, "click", this.$3); Sys.UI.DomEvent.addHandler(this.$9, "submit", this.$4) }, $C: function (e) { if (e.disabled) { return null } var t = e.tagName.toUpperCase(); var n = e; if (t === "INPUT") { var r = n.type; if (r === "submit" || r === "image") { return n } } else if (t === "BUTTON" && n.type === "submit") { return n } return null }, $D: function (e) { this.$6 = this.$C(e.target) }, $E: function (e) { var t = e.target; var n = this.$6; if (n && n.disableValidation) { return } var r = this.validate("submit"); if (!Sys.Mvc._ValidationUtil.$0(r)) { e.preventDefault() } }, $11: function () { if (!this.$5.length) { this.$B() } else { this.$A() } }, validate: function (e) { var t = this.fields; var n = []; for (var r = 0; r < t.length; r++) { var i = t[r]; if (!i.elements[0].disabled) { var s = i.validate(e); if (s) { Array.addRange(n, s) } } } if (this.replaceValidationSummary) { this.clearErrors(); this.addErrors(n) } return n } }; Sys.Mvc.FieldContext = function (e) { this.$A = []; this.elements = new Array(0); this.validations = new Array(0); this.formContext = e; this.$6 = Function.createDelegate(this, this.$D); this.$7 = Function.createDelegate(this, this.$E); this.$8 = Function.createDelegate(this, this.$F); this.$9 = Function.createDelegate(this, this.$10) }; Sys.Mvc.FieldContext.prototype = { $6: null, $7: null, $8: null, $9: null, defaultErrorMessage: null, formContext: null, replaceValidationMessageContents: false, validationMessageElement: null, addError: function (e) { this.addErrors([e]) }, addErrors: function (e) { if (!Sys.Mvc._ValidationUtil.$0(e)) { Array.addRange(this.$A, e); this.$14() } }, clearErrors: function () { Array.clear(this.$A); this.$14() }, $B: function () { var e = this.validationMessageElement; if (e) { if (this.replaceValidationMessageContents) { Sys.Mvc._ValidationUtil.$4(e, this.$A[0]) } Sys.UI.DomElement.removeCssClass(e, "field-validation-valid"); Sys.UI.DomElement.addCssClass(e, "field-validation-error") } var t = this.elements; for (var n = 0; n < t.length; n++) { var r = t[n]; Sys.UI.DomElement.removeCssClass(r, "input-validation-valid"); Sys.UI.DomElement.addCssClass(r, "input-validation-error") } }, $C: function () { var e = this.validationMessageElement; if (e) { if (this.replaceValidationMessageContents) { Sys.Mvc._ValidationUtil.$4(e, "") } Sys.UI.DomElement.removeCssClass(e, "field-validation-error"); Sys.UI.DomElement.addCssClass(e, "field-validation-valid") } var t = this.elements; for (var n = 0; n < t.length; n++) { var r = t[n]; Sys.UI.DomElement.removeCssClass(r, "input-validation-error"); Sys.UI.DomElement.addCssClass(r, "input-validation-valid") } }, $D: function (e) { if (e.target["__MVC_HasTextChanged"] || e.target["__MVC_HasValidationFired"]) { this.validate("blur") } }, $E: function (e) { e.target["__MVC_HasTextChanged"] = true }, $F: function (e) { e.target["__MVC_HasTextChanged"] = true; if (e.target["__MVC_HasValidationFired"]) { this.validate("input") } }, $10: function (e) { if (e.rawEvent.propertyName === "value") { e.target["__MVC_HasTextChanged"] = true; if (e.target["__MVC_HasValidationFired"]) { this.validate("input") } } }, enableDynamicValidation: function () { var e = this.elements; for (var t = 0; t < e.length; t++) { var n = e[t]; if (Sys.Mvc._ValidationUtil.$2(n, "onpropertychange")) { var r = document.documentMode; if (r && r >= 8) { Sys.UI.DomEvent.addHandler(n, "propertychange", this.$9) } } else { Sys.UI.DomEvent.addHandler(n, "input", this.$8) } Sys.UI.DomEvent.addHandler(n, "change", this.$7); Sys.UI.DomEvent.addHandler(n, "blur", this.$6) } }, $11: function (e, t) { var n = t || this.defaultErrorMessage; if (Boolean.isInstanceOfType(e)) { return e ? null : n } if (String.isInstanceOfType(e)) { return e.length ? e : n } return null }, $12: function () { var e = this.elements; return e.length > 0 ? e[0].value : null }, $13: function () { var e = this.elements; for (var t = 0; t < e.length; t++) { var n = e[t]; n["__MVC_HasValidationFired"] = true } }, $14: function () { if (!this.$A.length) { this.$C() } else { this.$B() } }, validate: function (e) { var t = this.validations; var n = []; var r = this.$12(); for (var i = 0; i < t.length; i++) { var s = t[i]; var o = Sys.Mvc.$create_ValidationContext(); o.eventName = e; o.fieldContext = this; o.validation = s; var u = s.validator(r, o); var a = this.$11(u, s.fieldErrorMessage); if (!Sys.Mvc._ValidationUtil.$1(a)) { Array.add(n, a) } } this.$13(); this.clearErrors(); this.addErrors(n); return n } }; Sys.Mvc.RangeValidator = function (e, t) { this.$0 = e; this.$1 = t }; Sys.Mvc.RangeValidator.create = function (e) { var t = e.ValidationParameters["min"]; var n = e.ValidationParameters["max"]; return Function.createDelegate(new Sys.Mvc.RangeValidator(t, n), (new Sys.Mvc.RangeValidator(t, n)).validate) }; Sys.Mvc.RangeValidator.prototype = { $0: null, $1: null, validate: function (e, t) { if (Sys.Mvc._ValidationUtil.$1(e)) { return true } var n = Number.parseLocale(e); return !isNaN(n) && this.$0 <= n && n <= this.$1 } }; Sys.Mvc.RegularExpressionValidator = function (e) { this.$0 = e }; Sys.Mvc.RegularExpressionValidator.create = function (e) { var t = e.ValidationParameters["pattern"]; return Function.createDelegate(new Sys.Mvc.RegularExpressionValidator(t), (new Sys.Mvc.RegularExpressionValidator(t)).validate) }; Sys.Mvc.RegularExpressionValidator.prototype = { $0: null, validate: function (e, t) { if (Sys.Mvc._ValidationUtil.$1(e)) { return true } var n = new RegExp(this.$0); var r = n.exec(e); return !Sys.Mvc._ValidationUtil.$0(r) && r[0].length === e.length } }; Sys.Mvc.RequiredValidator = function () { }; Sys.Mvc.RequiredValidator.create = function (e) { return Function.createDelegate(new Sys.Mvc.RequiredValidator, (new Sys.Mvc.RequiredValidator).validate) }; Sys.Mvc.RequiredValidator.$0 = function (e) { if (e.tagName.toUpperCase() === "INPUT") { var t = e.type.toUpperCase(); if (t === "RADIO") { return true } } return false }; Sys.Mvc.RequiredValidator.$1 = function (e) { if (e.tagName.toUpperCase() === "SELECT") { return true } return false }; Sys.Mvc.RequiredValidator.$2 = function (e) { if (e.tagName.toUpperCase() === "INPUT") { var t = e.type.toUpperCase(); switch (t) { case "TEXT": case "PASSWORD": case "FILE": return true } } if (e.tagName.toUpperCase() === "TEXTAREA") { return true } return false }; Sys.Mvc.RequiredValidator.$3 = function (e) { for (var t = 0; t < e.length; t++) { var n = e[t]; if (n.checked) { return true } } return false }; Sys.Mvc.RequiredValidator.$4 = function (e) { for (var t = 0; t < e.length; t++) { var n = e[t]; if (n.selected) { if (!Sys.Mvc._ValidationUtil.$1(n.value)) { return true } } } return false }; Sys.Mvc.RequiredValidator.$5 = function (e) { return !Sys.Mvc._ValidationUtil.$1(e.value) }; Sys.Mvc.RequiredValidator.prototype = { validate: function (e, t) { var n = t.fieldContext.elements; if (!n.length) { return true } var r = n[0]; if (Sys.Mvc.RequiredValidator.$2(r)) { return Sys.Mvc.RequiredValidator.$5(r) } if (Sys.Mvc.RequiredValidator.$0(r)) { return Sys.Mvc.RequiredValidator.$3(n) } if (Sys.Mvc.RequiredValidator.$1(r)) { return Sys.Mvc.RequiredValidator.$4(r.options) } return true } }; Sys.Mvc.StringLengthValidator = function (e, t) { this.$1 = e; this.$0 = t }; Sys.Mvc.StringLengthValidator.create = function (e) { var t = e.ValidationParameters["min"] || 0; var n = e.ValidationParameters["max"] || Number.MAX_VALUE; return Function.createDelegate(new Sys.Mvc.StringLengthValidator(t, n), (new Sys.Mvc.StringLengthValidator(t, n)).validate) }; Sys.Mvc.StringLengthValidator.prototype = { $0: 0, $1: 0, validate: function (e, t) { if (Sys.Mvc._ValidationUtil.$1(e)) { return true } return this.$1 <= e.length && e.length <= this.$0 } }; Sys.Mvc._ValidationUtil = function () { }; Sys.Mvc._ValidationUtil.$0 = function (e) { return !e || !e.length }; Sys.Mvc._ValidationUtil.$1 = function (e) { return !e || !e.length }; Sys.Mvc._ValidationUtil.$2 = function (e, t) { return t in e }; Sys.Mvc._ValidationUtil.$3 = function (e) { while (e.firstChild) { e.removeChild(e.firstChild) } }; Sys.Mvc._ValidationUtil.$4 = function (e, t) { var n = document.createTextNode(t); Sys.Mvc._ValidationUtil.$3(e); e.appendChild(n) }; Sys.Mvc.ValidatorRegistry = function () { }; Sys.Mvc.ValidatorRegistry.getValidator = function (e) { var t = Sys.Mvc.ValidatorRegistry.validators[e.ValidationType]; return t ? t(e) : null }; Sys.Mvc.ValidatorRegistry.$0 = function () { return { required: Function.createDelegate(null, Sys.Mvc.RequiredValidator.create), length: Function.createDelegate(null, Sys.Mvc.StringLengthValidator.create), regex: Function.createDelegate(null, Sys.Mvc.RegularExpressionValidator.create), range: Function.createDelegate(null, Sys.Mvc.RangeValidator.create), number: Function.createDelegate(null, Sys.Mvc.NumberValidator.create) } }; Sys.Mvc.NumberValidator.registerClass("Sys.Mvc.NumberValidator"); Sys.Mvc.FormContext.registerClass("Sys.Mvc.FormContext"); Sys.Mvc.FieldContext.registerClass("Sys.Mvc.FieldContext"); Sys.Mvc.RangeValidator.registerClass("Sys.Mvc.RangeValidator"); Sys.Mvc.RegularExpressionValidator.registerClass("Sys.Mvc.RegularExpressionValidator"); Sys.Mvc.RequiredValidator.registerClass("Sys.Mvc.RequiredValidator"); Sys.Mvc.StringLengthValidator.registerClass("Sys.Mvc.StringLengthValidator"); Sys.Mvc._ValidationUtil.registerClass("Sys.Mvc._ValidationUtil"); Sys.Mvc.ValidatorRegistry.registerClass("Sys.Mvc.ValidatorRegistry"); Sys.Mvc.ValidatorRegistry.validators = Sys.Mvc.ValidatorRegistry.$0(); Sys.Application.add_load(function () { Sys.Application.remove_load(arguments.callee); Sys.Mvc.FormContext._Application_Load() })